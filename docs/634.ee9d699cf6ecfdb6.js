"use strict";(self.webpackChunkPillApp=self.webpackChunkPillApp||[]).push([[634],{2634:(I,s,n)=>{n.r(s),n.d(s,{RememberDateModule:()=>Z});var l=n(9808),m=n(2382),e=n(1223),d=n(5425),c=n(3438),u=n(9192);function p(t,o){1&t&&(e.TgZ(0,"div"),e._uU(1," El campo nombre es obligatorio "),e.qZA())}function g(t,o){if(1&t&&(e.TgZ(0,"div",17),e.YNc(1,p,2,0,"div",18),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.title.getError("required"))}}function b(t,o){1&t&&(e.TgZ(0,"div"),e._uU(1," El campo nombre es obligatorio "),e.qZA())}function f(t,o){if(1&t&&(e.TgZ(0,"div",17),e.YNc(1,b,2,0,"div",18),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.date.getError("required"))}}function h(t,o){1&t&&(e.TgZ(0,"div"),e._uU(1," El campo nombre es obligatorio "),e.qZA())}function v(t,o){if(1&t&&(e.TgZ(0,"div",17),e.YNc(1,h,2,0,"div",18),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.time.getError("required"))}}let R=(()=>{class t{constructor(r,i,a){this.activatedRoute=r,this.router=i,this.dataCreationService=a,this.patientId=0,this.submitted=!1,this.registerRememberDateForm=new m.cw({title:new m.NI("",m.kI.required),date:new m.NI(this.currentDate(),m.kI.required),time:new m.NI(this.currentTime(),m.kI.required),dateReminder:new m.NI(this.currentDate(),[]),timeReminder:new m.NI(this.currentTime(),[])})}get title(){return this.registerRememberDateForm.controls.title}get date(){return this.registerRememberDateForm.controls.date}get time(){return this.registerRememberDateForm.controls.time}get dateReminder(){return this.registerRememberDateForm.controls.dateReminder}get timeReminder(){return this.registerRememberDateForm.controls.timeReminder}ngOnInit(){this.paramSub=this.activatedRoute.paramMap.subscribe(r=>{let i=r.get("id");null!=i&&(this.patientId=Number.parseInt(i))})}ngOnDestroy(){this.paramSub.unsubscribe()}registerSubmit(){const r=this.registerRememberDateForm.value;if(this.registerRememberDateForm.valid){const i={patientId:this.patientId,description:r.title,appointmentTimestamp:this.createTimestamp(r.date,r.time),reminderTimestamp:this.createTimestamp(r.dateReminder,r.timeReminder)};this.dataCreationService.registerMeeting(i).subscribe(a=>{this.onReset()})}}createTimestamp(r,i){return new Date(r+"T"+i).getTime()/1e3}currentDate(){return(new Date).toISOString().split("T")[0]}currentTime(){return(new Date).toLocaleString("es-ES",{hour:"2-digit",minute:"2-digit",hour12:!1})}onReset(){this.submitted=!1,this.registerRememberDateForm.reset(),this.goBack()}goBack(){this.router.navigate(["/patient/"+this.patientId])}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(d.gz),e.Y36(d.F0),e.Y36(c.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-remember-date"]],decls:28,vars:6,consts:[[3,"backUrl"],[1,"vh-100"],[1,"card","col-12","col-sm-8","col-md-4","col-lg-3","col-xl-3","mx-auto","mt-5"],[1,"card-body","mx-5"],[3,"formGroup","ngSubmit"],[1,"form-group","mb-5","mt-5"],[1,"h4"],["type","text","formControlName","title","id","title","aria-describedby","title","placeholder","\xbfDe qu\xe9 es la cita?",1,"form-control"],["class","alert alert-danger mt-2",4,"ngIf"],[1,"form-group","mb-5"],["type","date","formControlName","date","id","date","placeholder","Introduce la fecha",1,"form-control","mb-3"],["type","time","formControlName","time","id","time","placeholder","Introduce la hora",1,"form-control"],["type","date","formControlName","dateReminder","id","dateReminder","placeholder","Introduce la fecha",1,"form-control","mb-3"],["type","time","formControlName","timeReminder","id","timeReminder","placeholder","Introduce la hora",1,"form-control"],[1,"text-center","mb-5"],["type","submit",1,"btn","btn-primary","mb-3",3,"disabled"],[1,"btn","btn-outline-primary-cancel","mb-3",3,"click"],[1,"alert","alert-danger","mt-2"],[4,"ngIf"]],template:function(r,i){1&r&&(e._UZ(0,"app-top-navigation",0),e.TgZ(1,"section",1)(2,"div",2)(3,"div",3)(4,"div")(5,"form",4),e.NdJ("ngSubmit",function(){return i.registerSubmit()}),e.TgZ(6,"div",5)(7,"p",6),e._uU(8,"Nombre de la cita"),e.qZA(),e._UZ(9,"input",7),e.YNc(10,g,2,1,"div",8),e.qZA(),e.TgZ(11,"div",9)(12,"p",6),e._uU(13,"Fecha y hora"),e.qZA(),e._UZ(14,"input",10),e.YNc(15,f,2,1,"div",8),e._UZ(16,"input",11),e.YNc(17,v,2,1,"div",8),e.qZA(),e.TgZ(18,"div",9)(19,"p",6),e._uU(20,"Recordatorio de la cita"),e.qZA(),e._UZ(21,"input",12)(22,"input",13),e.qZA(),e.TgZ(23,"div",14)(24,"button",15),e._uU(25," crear "),e.qZA(),e.TgZ(26,"button",16),e.NdJ("click",function(){return i.goBack()}),e._uU(27," Cancelar "),e.qZA()()()()()()()),2&r&&(e.Q6J("backUrl","/patient/"+i.patientId),e.xp6(5),e.Q6J("formGroup",i.registerRememberDateForm),e.xp6(5),e.Q6J("ngIf",i.title.invalid&&(i.title.dirty||i.title.touched)),e.xp6(5),e.Q6J("ngIf",i.date.invalid&&(i.date.dirty||i.date.touched)),e.xp6(2),e.Q6J("ngIf",i.time.invalid&&(i.time.dirty||i.time.touched)),e.xp6(7),e.Q6J("disabled",!i.registerRememberDateForm.valid))},directives:[u.g,m._Y,m.JL,m.sg,m.Fj,m.JJ,m.u,l.O5],styles:[""]}),t})();var D=n(3408);const T=[{path:"",component:R}];let Z=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.ez,d.Bz.forChild(T),m.UX,D.A]]}),t})()}}]);